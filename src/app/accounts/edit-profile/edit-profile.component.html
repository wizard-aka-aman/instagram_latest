<div class="profile-edit-container">
  <!-- Header -->
  <div class="profile-header">
    <h5 class="header-title">Edit Profile</h5>
  </div>

  <!-- Profile Image Section -->
  <div class="profile-photo-section">
    <div class="profile-photo-wrapper">
      <img [src]="user.profilePicture || 'assets/avatar.png'" 
           alt="Profile" 
           class="profile-photo">
    </div>
    <div class="profile-info">
      <h6 class="username">{{ user.userName }}</h6>
      <button type="button" 
              class="change-photo-btn" 
              data-bs-toggle="modal" 
              data-bs-target="#profileModal">
        Change profile photo
      </button>
    </div>
  </div>

  <!-- Edit Form -->
  <form (ngSubmit)="onSubmit()" class="profile-form">
    <!-- Name Field -->
    <div class="form-group">
      <label class="form-label">Name</label>
      <input type="text" 
             class="form-input" 
             [(ngModel)]="user.fullName" 
             name="name"
             placeholder="Name">
    </div>

    <!-- Username Field -->
    <div class="form-group">
      <label class="form-label">Username</label>
      <input type="text" 
             class="form-input" 
             [(ngModel)]="user.userName" 
             name="username"
             disabled="true">
    </div>

    <!-- Bio Field -->
    <div class="form-group">
      <label class="form-label">Bio</label>
      <textarea class="form-input form-textarea" 
                rows="3" 
                [(ngModel)]="user.bio" 
                name="bio"
                placeholder="Bio"
                maxlength="200"></textarea>
      <small class="char-count">{{ user.bio?.length || 0 }} / 200</small>
    </div>

    <!-- Gender Field -->
    <div class="form-group">
      <label class="form-label">Gender</label>
      <select class="form-input" [(ngModel)]="user.gender" name="gender">
        <option value="">Prefer not to say</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
      </select>
      <small class="helper-text">This won't be part of your public profile.</small>
    </div>

    <!-- Profile Type Field -->
    <div class="form-group">
      <div class="switch-group">
        <div class="switch-info">
          <label class="form-label mb-0">Private Account</label>
          <small class="helper-text">When your account is private, only people you approve can see your photos and videos.</small>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" 
                 [checked]="!user.isPublic" 
                 (change)="user.isPublic = !user.isPublic"
                 name="isPublic">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <!-- Location Visible Field -->
    <div class="form-group">
      <div class="switch-group">
        <div class="switch-info">
          <label class="form-label mb-0">Show Location</label>
          <small class="helper-text">Allow others to see your location information.</small>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" 
                 [(ngModel)]="user.isLocationEnable" 
                 name="isLocationEnable">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="form-actions">
      <button class="btn-submit" type="submit">Submit</button>
    </div>

    <!-- Logout Button (Mobile Only) -->
    <div class="form-actions mobile-only">
      <button class="btn-logout" type="button" (click)="logout()">Log Out</button>
    </div>
  </form>
</div>

<!-- Profile Photo Modal -->
<div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content profile-modal">
      <div class="modal-header">
        <h5 class="modal-title">Change Profile Photo</h5>
      </div>
      <div class="modal-body">
        <button class="modal-action-btn primary" (click)="triggerFileInput()">
          Upload Photo
        </button>
        <button class="modal-action-btn danger" (click)="removePhoto()">
          Remove Current Photo
        </button>
        <button class="modal-action-btn" #closeModal data-bs-dismiss="modal">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Hidden file input -->
<input type="file" accept="image/*" style="display:none" #fileInput (change)="handleFileUpload($event)" />
