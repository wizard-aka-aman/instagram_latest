<div class="container py-3">
  <h4 class="fw-bold mb-4">Notifications</h4>
  <hr class="text-white-50">

  <ul class="list-unstyled mb-5">
    <li *ngFor="let n of notifications; let i = index" #NotificationList
        class="d-flex align-items-center mb-3"
        [attr.data-index]="i"
        style="min-height: 56px;">

      <div class="d-flex align-items-center flex-grow-1">
        
        <img [src]="getProfileImage(n.profilePicture)" routerLink="/{{n.loggedInUserName}}"
             class="rounded-circle me-3"
             alt="{{n.loggedInUserName}} profile" width="44" height="44"
             style="cursor: pointer; object-fit: cover;">

        <div class="text-white">
          <span class="fw-bold me-1" routerLink="/{{n.loggedInUserName}}" style="cursor: pointer;">
            {{ n.loggedInUserName }}
          </span>
          <span>
            {{ n.notificationText }}
          </span>
          <div class="small mt-1" style="color: rgb(168, 168, 168);">
            {{ TimeSincePost(n.createdAt) }}
          </div>
        </div>
      </div>

      <div class="ms-3 flex-shrink-0 d-flex align-items-center">
        
        <ng-container *ngIf="n.postId != null || n.reelId != null">
          <img *ngIf="n.postId != null && n.postId.imageUrl != 'multiple'" 
               routerLink="/{{n.userName}}/p/{{n.postId.postId}}"
               [src]="getProfileImage(n.postId.imageUrl)" 
               alt="post image"
               class="rounded"
               width="48" height="48"
               style="object-fit: cover; cursor: pointer;">
               
          <img *ngIf="n.postId != null && n.postId.imageUrl == 'multiple'" 
               routerLink="/{{n.userName}}/p/{{n.postId.postId}}"
               [src]="getProfileImage(n.mediaUrl[0])" 
               alt="multi-media post image"
               class="rounded"
               width="48" height="48"
               style="object-fit: cover; cursor: pointer;">

          <video *ngIf="n.reelId != null" 
                 routerLink="/{{n.userName}}/reel/{{n.reelId.publicId}}"
                 [src]="n.reelId.url" 
                 class="rounded"
                 width="48" height="48"
                 style="object-fit: cover; cursor: pointer;"></video>
        </ng-container>

        <div *ngIf="n.notificationText == 'Requested to follow you.'" class="ms-3">
          <button class="btn btn-primary btn-sm me-2" (click)="ConfirmFollow(n.loggedInUserName , n)"
                  style="font-weight: 600;">
            Confirm
          </button>
          <button class="btn btn-outline-secondary btn-sm" (click)="RemoveRequest(n.loggedInUserName ,n)"
                  style="font-weight: 600; color: rgb(168, 168, 168); border-color: rgb(168, 168, 168);">
            Delete
          </button>
        </div>
      </div>
    </li>

    <li *ngIf="loading && notifications.length > 0" class="text-center py-3 text-white-50">
      Loading more...
    </li>
    <li *ngIf="notifications.length == 0 && !loading" class="text-center py-5 text-white-50">
      No Notifications Yet
    </li>
    <li *ngIf="totalPages === notifications.length && notifications.length > 0 && !loading" class="text-center py-3 text-white-50 small">
      You've seen all notifications.
    </li>

  </ul>
</div>